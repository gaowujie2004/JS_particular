<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
</style>
<title>  </title>
</head>
<body>
  <style>
    
  </style>
  VUE 简易版的 数据响应式绑定. 

  <div id="app">
    <div> {{name}} </div>
    <div> {{age}} </div>
    <span> {{name}}  </span>
  </div>

  <script>
    var data = { name:'GWJ', age:22 }
    var dataKeys = Object.keys(data)
    var vdom = []

    var change = function(key) {
        for ( const obj of vdom ) {
            if ( obj.innerHTML.includes(key) ) {
                obj.el.innerHTML = data[key]
            }
        }
    }
    var observe = function(data) {
        if (Object.prototype.toString.call(data) !== '[object Object]') {return}
        for (const key of dataKeys) {
            defineReactive( key, data[key],  data)
        }
    }
    var defineReactive = function(key, value, data) {
        observe(value)
        Object.defineProperty( data, key, {
          get() {
                return value
            },
            set(newVal){
                value = newVal
                change(key)
            }
        })
    }
    var compiler = function(el) {
      for (const c of el.children) {
          if (c.children.length > 0) {
              compiler(c)
          } else {
            // 只有文本
            for (const key of dataKeys) {
              if ( c.innerHTML.includes(key) ) {
                vdom.push({el:c, innerHTML:c.innerHTML })
                c.innerHTML = data[key]
              }
          }
        }
      }
    }

        
    // 开始
    // 1、先劫持data
    observe(data)
    // 2、解析HTML
    compiler( document.querySelector('#app') )
  
  </script>
</body>
</html>